{"version":3,"file":"gamblingjs.es5.js","sources":["../node_modules/kombinatoricsjs/src/kombinatoricsjs.ts","../src/constants.ts","../src/routines.ts","../src/hashesCreator.ts","../src/pokerEvaluators.ts","../src/gamblingjs.ts"],"sourcesContent":["/*TYPEDEFS?\ntype CallbackFunctionVariadicAnyReturn = (...args: any[]) => any;\ntype CallbackFunctionSomeVariadic =\n  (arg1: string, arg2: number, ...args: any[]) => void;\n*/\ntype genericListFn = <S>(list: S[], ...args: any[]) => S[][]\n\nexport const factorial = (n: number): number => {\n  let f: number = 1\n  for (let i: number = 1; i < n + 1; ++i) {\n    f *= i\n  }\n  return f\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\nexport const cNK = (n: number, k: number): number => {\n  let i: number,\n    coeff: number = 1\n  if (n < k) return 0\n  if (n === k) return 1\n  for (i = n - k + 1; i <= n; ++i) coeff *= i\n  for (i = 1; i <= k; ++i) coeff /= i\n  return coeff\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\nexport const pNK = (n: number, k: number): number => {\n  let f: number = 1\n  for (let i: number = n - k + 1; i < n + 1; ++i) {\n    f *= i\n  }\n  return f\n}\n\nexport const matrixToArray = <S>(matrix: S[][]) => {\n  let arr: S[] = [],\n    c: number,\n    r: number,\n    lc: number = matrix.length,\n    lr: number,\n    row: any[]\n  for (c = 0; c < lc; ++c) {\n    row = matrix[c]\n    lr = row.length\n    for (r = 0; r < lr; ++r) {\n      arr.push(row[r])\n    }\n  }\n  return arr\n}\n\ntype combinatoricsFn = (...args: number[]) => number\ninterface numbersCacheMap {\n  [index: number]: number\n}\n/*@TODO improve memoize to work with a wider range of functions (at least combinatorics with numeric inputs*/\nconst memoize: (fn: combinatoricsFn) => combinatoricsFn = (\n  fn: combinatoricsFn\n): combinatoricsFn => {\n  const cache: numbersCacheMap = {}\n  return (n: number, k: number = 0): number => {\n    if (n < 256 && k <= n) {\n      let key = (n << 9) | k\n      let out = cache[key]\n      return out ? out : (cache[key] = fn(n, k))\n    } else return fn(n, k)\n  }\n}\n\nexport const memoize_factorial = memoize(factorial)\nexport const memoize_pNK = memoize(pNK)\nexport const memoize_cNK = memoize(cNK)\n\n/**\n *BoxMuller method\n */\nconst rnd_bmt = (): number[] => {\n  let x: number = 0,\n    y: number = 0,\n    rds: number,\n    c: number\n\n  // Get two random numbers from -1 to 1.\n  // If the radius is zero or greater than 1, throw them out and pick two new ones\n  // Rejection sampling throws away about 20% of the pairs.\n  do {\n    x = Math.random() * 2 - 1\n    y = Math.random() * 2 - 1\n    rds = x * x + y * y\n  } while (rds == 0 || rds > 1)\n\n  // This magic is the Box-Muller Transform\n  c = Math.sqrt((-2 * Math.log(rds)) / rds)\n\n  // It always creates a pair of numbers. I'll return them in an array.\n  // This function is quite efficient so don't be afraid to throw one away if you don't need both.\n  return [x * c, y * c]\n}\n\n/**\n *Central Limit method\n */\nconst rnd_snd = () => {\n  return Math.random() * 2 - 1 + (Math.random() * 2 - 1) + (Math.random() * 2 - 1)\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\n\nexport const shuffle = (ar: any[]): void => {\n  let i: number,\n    r: number,\n    tmp: any,\n    l: number = ar.length\n  for (i = 0; i < l; ++i) {\n    r = ~~(Math.random() * l)\n    ;[ar[r], ar[i]] = [ar[i], ar[r]]\n  }\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\n\nexport const boxMullerShuffle = (ar: any[]): void => {\n  let i: number,\n    r1: number,\n    r2: number,\n    tmp: any,\n    l: number = ar.length\n  for (i = 0; i < l / 2; ++i) {\n    ;[r1, r2] = rnd_bmt()\n    r1 = ~~((r1 + 1) * l)\n    r2 = ~~((r2 + 1) * l)\n    ;[ar[r1], ar[r2]] = [ar[r2], ar[r1]]\n  }\n}\n/**\n *@method\n *\n *@param\n *@return\n */\nexport const normalRandom = {\n  BoxMuller: rnd_bmt,\n  CentralLimit: rnd_snd\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\n\nexport const indexArray = (l: number) => {\n  let arr: number[] = []\n\n  if (!isNaN(l) && l > 0) {\n    for (let i = 0; i < l; ++i) {\n      arr[i] = i\n    }\n  }\n\n  return arr\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\n/*iterator for generating combinations call it nextCombination*/\n\nexport const binomIncrement = (idxVector: number[], maxVal: number) => {\n  let l: number, i: number, j: number\n  j = 0\n  l = idxVector.length\n  if (maxVal < l) return false //doesn't work if n<k\n  if (idxVector[l - 1] < maxVal) idxVector[l - 1]++\n  else {\n    //find value to increment\n    for (i = l - 1; i >= 0; i -= 1) {\n      if (idxVector[i] < maxVal - j) break\n      else j += 1\n    }\n    if (i < 0) return 0\n    //increment\n    idxVector[i] += 1\n    i += 1\n    //adjust successive values\n    for (i; i < l; i += 1) {\n      idxVector[i] = idxVector[i - 1] + 1\n    }\n  }\n\n  return 1\n}\n\nexport const combinationsIterator = (list: any[], k: number) => {\n  let n: number = list.length\n\n  var _index: number[] = indexArray(k)\n  var beginIndex: number[] = indexArray(k)\n\n  var _collection = list.slice()\n  var combination = new Array(k)\n  var count = 0\n\n  function setCombination() {\n    for (let i = 0; i < k; ++i) {\n      combination[i] = _collection[_index[i]]\n    }\n  }\n\n  setCombination()\n\n  var iterator = {\n    next: function() {\n      if (binomIncrement(_index, n - 1)) {\n        count++\n        setCombination()\n        return 1\n      } else {\n        return 0\n      }\n    },\n    getComb: function(cnt: number = 0) {\n      if (cnt > 0) {\n        var c = cnt - count\n        var step\n        while (c > 0 && (step = binomIncrement(_index, n - 1))) {\n          c--\n          count++\n        }\n\n        if (!step) return 0\n        setCombination()\n      }\n\n      return combination.slice()\n    },\n    getIndex: function() {\n      return _index\n    },\n    getCount: function() {\n      return count\n    },\n    reset: function() {\n      _index = indexArray(k)\n      setCombination()\n      count = 0\n    }\n  }\n  return iterator\n}\n\nexport const pick = (\n  n: number,\n  got: any[],\n  pos: number,\n  from: any[],\n  limit: number,\n  cntLimit: number,\n  callBack: Function\n): number => {\n  let cnt: number = 0,\n    limitCount: number = cntLimit\n  if (got.length == n) {\n    callBack(got)\n    return 1\n  }\n\n  for (let i: number = pos; i < from.length; i++) {\n    got.push(from[i])\n\n    if (limitCount === limit) {\n      cnt += pick(n, got, i + 1, from, limit, 0, callBack)\n      limitCount = 0\n    } else {\n      let next: number =\n        limitCount === 0 || got[got.length - 1] === got[got.length - 2]\n          ? limitCount + 1\n          : limitCount\n\n      cnt += pick(n, got, i, from, limit, next, callBack)\n    }\n\n    got.pop()\n  }\n\n  return cnt\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\n\nexport const combinations: genericListFn = (_collection: any[], k: number): any[][] => {\n  if (_collection.length < k || k < 1) {\n    return [_collection]\n  }\n\n  let comb: any[][] = []\n\n  pick(k, [], 0, _collection, 0, 0, (c: any[]) => {\n    comb.push(c.slice())\n  })\n\n  return comb\n}\n\nexport const pickMulti = (\n  n: number,\n  got: any[],\n  pos: number,\n  from: any[],\n  limit: number[],\n  limitCount: number[],\n  callBack: Function\n) => {\n  /*let limitCount = limitCnt.slice();*/\n\n  if (got.length == n) {\n    callBack(got)\n  }\n\n  for (let i: number = pos; i < from.length; i++) {\n    got.push(from[i])\n\n    if (limitCount[i] === limit[i]) {\n      limitCount[i] = 0\n      pickMulti(n, got, i + 1, from, limit, limitCount, callBack)\n    } else {\n      if (pos === 0 || limitCount[i] === 0 || got[got.length - 1] === got[got.length - 2]) {\n        limitCount[i]++\n      }\n      pickMulti(n, got, i, from, limit, limitCount, callBack)\n    }\n\n    got.pop()\n  }\n\n  return 1\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\nexport const multiCombinations = (_collection: any[], n: number, repetition: number): any[][] => {\n  let multiComb: any[][] = []\n\n  pick(n, [], 0, _collection, repetition, 0, (c: any[]) => {\n    multiComb.push(c.slice())\n  })\n\n  return multiComb\n}\n\n/**\n *@method\n *\n *@param\n *@return\n */\nexport const combinationsMultiSets = (_collection: any[], n: number): any[][] => {\n  var l = _collection.length,\n    limitCount = [0],\n    limits = [0],\n    list = [_collection[0]],\n    j = 0\n\n  for (var i = 1; i < l; ++i) {\n    if (_collection[i] === _collection[i - 1]) {\n      limits[j]++\n    } else {\n      j++\n      list[j] = _collection[i]\n      limitCount.push(0)\n      limits.push(0)\n    }\n  }\n  var multiComb: any[][] = []\n\n  pickMulti(n, [], 0, list, limits, limitCount, (c: any[]) => {\n    multiComb.push(c.slice())\n  })\n\n  return multiComb\n}\n\n/*@TODO use destructuring*/\nfunction swap(items: any[], i: number, j: number) {\n  var temp = items[i]\n  items[i] = items[j]\n  items[j] = temp\n}\n\n/*standard callback slices items and returns it*/\nexport const heapPermute = (n: number, items: any[], callBack: Function) => {\n  if (n === 1) {\n    callBack(items, n)\n  } else {\n    for (var i = 0; i < n; ++i) {\n      heapPermute(n - 1, items, callBack)\n      if (n % 2 === 1) {\n        swap(items, 0, n - 1)\n      } else {\n        swap(items, i, n - 1)\n      }\n    }\n  }\n}\n\nexport const permutations = (list: any[]): any[][] => {\n  var p = indexArray(list.length)\n  var i = 1,\n    j\n  var n = list.length\n  var perms: any[][] = [list.slice()]\n  while (i < n) {\n    p[i]--\n    j = i % 2 ? p[i] : 0\n\n    swap(list, i, j)\n    perms.push(list.slice())\n\n    i = 1\n    while (p[i] === 0) {\n      p[i] = i\n      i++\n    }\n  }\n\n  return perms\n}\n\nexport const permutationsNK = (list: any[], k: number): any[][] => {\n  let permsNK: any[][] = []\n  let _combsNK = combinations(list, k)\n  for (let i = 0; i < _combsNK.length; ++i) {\n    permsNK.push(permutations(_combsNK[i]))\n  }\n  return matrixToArray(permsNK)\n}\n\n/*not exposed*/\nconst nextPermutation = (list: any[], index: number[], callBack: Function) => {\n  let n = list.length\n  let i = 1,\n    j\n  while (index[i] === 0) {\n    index[i] = i\n    i++\n  }\n  if (i < n) {\n    index[i]--\n    j = i % 2 ? index[i] : 0\n\n    swap(list, i, j)\n    return callBack(list)\n  } else return 0\n}\n\n/*not exposed*/\nconst nextPermutationLexi = (list: any[]) => {\n  var n = list.length\n  var i = n - 1\n  while (i > 0 && list[i - 1] >= list[i]) {\n    i--\n  }\n  if (i <= 0) return 0\n  var j = n - 1\n\n  while (list[j] <= list[i - 1]) {\n    j--\n  }\n  swap(list, i - 1, j)\n  /*then reverse items from i+1 to j*/\n  j = n - 1\n  while (i < j) {\n    swap(list, i, j)\n    i++\n    j--\n  }\n\n  return 1\n}\n\nconst makeIndex = (list: any[]) => {\n  let n: number = list.length\n  let index: number[] = indexArray(n)\n  let j = 0,\n    k = 0\n\n  for (var i = 1; i < n; ++i) {\n    if (list[i] === list[i - 1]) {\n      index[i] = index[i - 1] = j\n    } else {\n      j++\n      index[i] = j\n    }\n  }\n  return index\n}\n\nexport const permutationsIterator = (list: any[]) => {\n  var n = list.length\n\n  var _index = indexArray(n)\n  var beginIndex = indexArray(n)\n\n  var _collection = list.slice()\n  var permutation = list.slice()\n  var count = 0\n\n  function setPermutation() {\n    for (var i = 0; i < n; ++i) {\n      permutation[i] = _collection[_index[i]]\n    }\n  }\n\n  var iterator = {\n    next: function() {\n      if (nextPermutationLexi(_index)) {\n        count++\n        setPermutation()\n        return 1\n      } else {\n        return 0\n      }\n    },\n    getPerm: function(cnt: number = 0) {\n      if (cnt > 0) {\n        var c = cnt - count\n        var step\n        while (c > 0 && (step = nextPermutationLexi(_index))) {\n          c--\n          count++\n        }\n\n        if (!step) return 0\n        setPermutation()\n      }\n\n      return permutation.slice()\n    },\n    getIndex: function() {\n      return _index\n    },\n    getCount: function() {\n      return count\n    },\n    reset: function() {\n      _index = indexArray(n)\n      setPermutation()\n      count = 0\n    }\n  }\n  return iterator\n}\n\nexport const permutationsMultiSets = (list: any[]): any[][] => {\n  var n = list.length,\n    index = indexArray(n)\n  var data = [list[0]],\n    perm: any[][] = [],\n    j = 0,\n    k = 0,\n    permutationMultiSet: any[][] = [list.slice()]\n  /*initializaition*/\n  for (var i = 1; i < n; ++i) {\n    if (list[i] === list[i - 1]) {\n      index[i] = index[i - 1] = j\n    } else {\n      j++\n      index[i] = j\n      data.push(list[i])\n    }\n  }\n\n  while (nextPermutationLexi(index)) {\n    for (k = 0; k < n; ++k) {\n      perm[k] = data[index[k]]\n    }\n\n    permutationMultiSet.push(perm.slice())\n  }\n\n  return permutationMultiSet\n}\n\nexport const permutationsNKMultiSets = (list: any[], k: number): any[][] => {\n  var permsNK: any[][] = []\n  var _combsNK = combinationsMultiSets(list, k)\n  for (var i = 0; i < _combsNK.length; ++i) {\n    permsNK.push(permutationsMultiSets(_combsNK[i]))\n  }\n  return matrixToArray(permsNK)\n}\n\nexport const crossProduct = (list: any[], k: number): any[][] => {\n  if (k < 1) return list\n  let crossProdList: any[][] = new Array(Math.pow(list.length, k))\n  let l = crossProdList.length\n  let ln = list.length\n\n  for (let i = 0; i < l; ++i) {\n    let tmpList: any[][] = []\n    let number = i\n    for (let j = k - 1; j >= 0; --j) {\n      let digit = number % ln\n      number = Math.floor(number / ln)\n      tmpList[j] = list[digit]\n    }\n    crossProdList[i] = tmpList\n  }\n  return crossProdList\n}\n\nexport const version = 1.0\n","/**\n * think of using typed array for performance reasons as these data is accessed very often\n * 8bit or 16bits arrays can be used\n */\nimport { NumberMap } from './interfaces';\nimport { NumberToStringMap } from './interfaces';\n\nexport const flushHash: number[] = [1, 2, 4, 8, 16, 32, 64, 128, 255, 508, 1012, 2016, 4016]; // 13 one for each rank\n\nexport const suitsHash: number[] = [0, 57, 1, 8]; // 4 one for each suit\n\n/**check for !==undefined */\nexport const flush5hHashCheck: Readonly<NumberMap> = {\n  '0': 0,\n  '5': 1,\n  '40': 8,\n  '285': 57\n};\n\nexport const flush7HashCheck: Readonly<NumberMap> = {\n  '0': 0,\n  '1': 0,\n  '2': 0,\n  '5': 1,\n  '6': 1,\n  '7': 1,\n  '8': 0,\n  '9': 0,\n  '13': 1,\n  '14': 1,\n  '16': 0,\n  '21': 1,\n  '40': 8,\n  '41': 8,\n  '42': 8,\n  '48': 8,\n  '49': 8,\n  '56': 8,\n  '57': 0,\n  '58': 0,\n  '62': 1,\n  '63': 1,\n  '65': 0,\n  '70': 1,\n  '97': 8,\n  '98': 8,\n  '105': 8,\n  '114': 0,\n  '119': 1,\n  '154': 8,\n  '285': 57,\n  '286': 57,\n  '287': 57,\n  '293': 57,\n  '294': 57,\n  '301': 57,\n  '342': 57,\n  '343': 57,\n  '350': 57,\n  '399': 57\n};\n\nexport const ranksHashOn7: number[] = []; // 13 one for each rank\n\nranksHashOn7[0] = 0;\nranksHashOn7[1] = 1;\nranksHashOn7[2] = 5;\nranksHashOn7[3] = 22;\nranksHashOn7[4] = 98;\nranksHashOn7[5] = 453;\nranksHashOn7[6] = 2031;\nranksHashOn7[7] = 8698;\nranksHashOn7[8] = 22854;\nranksHashOn7[9] = 83661;\nranksHashOn7[10] = 262349;\nranksHashOn7[11] = 636345;\nranksHashOn7[12] = 1479181;\n\nexport const ranksHashOn5: number[] = []; // one for each rank\n\nranksHashOn5[0] = 0; // 2\nranksHashOn5[1] = 1; // 3\nranksHashOn5[2] = 5; // 4\nranksHashOn5[3] = 22; // 5\nranksHashOn5[4] = 94; // 6\nranksHashOn5[5] = 312; // 7\nranksHashOn5[6] = 992; // 8\nranksHashOn5[7] = 2422; // 9\nranksHashOn5[8] = 5624; // 10\nranksHashOn5[9] = 12522; // J\nranksHashOn5[10] = 19998; // Q\nranksHashOn5[11] = 43258; // K\nranksHashOn5[12] = 79415; // A\n\nexport const rankToFaceSymbol: string[] = [\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  'T',\n  'J',\n  'Q',\n  'K',\n  'A'\n];\nexport const suitToFaceSymbol: string[] = ['s', 'd', 'h', 'c'];\n/* \narrays initialization\n*/\nexport const deckOfRanks_5: number[] = new Array(52);\nexport const deckOfRanks_7: number[] = new Array(52);\nexport const deckOfFlushes: number[] = new Array(52);\nexport const deckOfSuits: number[] = new Array(52);\n\nexport const fullCardsDeckHash_5: number[] = new Array(52);\nexport const fullCardsDeckHash_7: number[] = new Array(52);\n\nexport const cardHashToDescription_5: NumberToStringMap = {};\nexport const cardHashToDescription_7: NumberToStringMap = {};\n\nfor (let i: number = 0; i < 52; i++) {\n  deckOfRanks_5[i] = ranksHashOn5[i % 13];\n  deckOfRanks_7[i] = ranksHashOn7[i % 13];\n  deckOfFlushes[i] = flushHash[i % 13];\n  deckOfSuits[i] = suitsHash[~~(i / 13)];\n\n  let card5 = (fullCardsDeckHash_5[i] = (deckOfRanks_5[i] << 9) + deckOfSuits[i]);\n  let card7 = (fullCardsDeckHash_7[i] = (deckOfRanks_7[i] << 9) + deckOfSuits[i]);\n  cardHashToDescription_5[card5] = i;\n  cardHashToDescription_7[card7] = i;\n}\n\nexport const STRAIGHTS: number[][] = [\n  [12, 0, 1, 2, 3],\n  [0, 1, 2, 3, 4],\n  [1, 2, 3, 4, 5],\n  [2, 3, 4, 5, 6],\n  [3, 4, 5, 6, 7],\n  [4, 5, 6, 7, 8],\n  [5, 6, 7, 8, 9],\n  [6, 7, 8, 9, 10],\n  [7, 8, 9, 10, 11],\n  [8, 9, 10, 11, 12]\n];\n\nexport const rankCards: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\nexport const HIGH_CARDS_5_AMOUNT: number = 1277;\nexport const FLUSHES_BASE_START: number = 5863;\nexport const STRAIGHT_FLUSH_BASE_START: number = 7452;\nexport const FLUSH_MASK: number = 511;\nexport const STRAIGHT_FLUSH_OFFSET: number = 1599;\nexport const handsRankingDelimiter_5cards: number[] = [\n  1276,\n  4136,\n  4994,\n  5852,\n  5862,\n  7139,\n  7295,\n  7451,\n  7461\n];\nexport const handRankingGroupNames: string[] = [\n  'high card',\n  'one pair',\n  'two pair',\n  'three of a kind',\n  'straight',\n  'flush',\n  'full house',\n  'four of a kind',\n  'straight flush'\n];\n/**\n * fill with these:\n * https://en.wikipedia.org/wiki/Poker_probability\n */\nexport const distinctHandsQuantityByGroup = {\n  HIGH_CARD: 1277,\n  ONE_PAIR: 2860,\n  TWO_PAIR: 858,\n  THREE_OF_A_KIND: 858,\n  STRAIGHT: 10,\n  FLUSH: 1277,\n  FULL_HOUSE: 156,\n  FOUR_OF_A_KIND: 156,\n  STRAIGHT_FLUSH: 10\n};\n/**\n * @TODO make function to work with non full decks. ex. deck of 40 cards\n *\n * */\n\n/**\n * @TODO prepare similar stuff for dice suited poker\n *\n * */\n","import * as kombinatoricsJs from 'kombinatoricsjs';\nimport { hashRanking, NumberMap, handInfo } from './interfaces';\nimport * as CONSTANTS from './constants';\n\nexport const atLeast5Eq = (list: (number | string)[][]): (number | string)[][] => {\n  return list.filter(v => {\n    let l = v.length;\n    let c = 0,\n      i = 1;\n    while (i < l) {\n      if (v[i] === v[i - 1]) {\n        c++;\n      } else {\n        c = 0;\n      }\n      i++;\n      if (c === 4) break;\n    }\n    return c >= 4;\n  });\n};\nexport const getVectorSum = (v: number[]): number => {\n  let l: number = v.length;\n  let s: number = 0;\n  for (let i: number = 0; i < l; i++) {\n    s += v[i];\n  }\n  return s;\n};\n\nexport const getFlushSuit7 = (v: number[]): number => {\n  let t: number = v[0];\n  let c: number = 0;\n  let i: number = 1;\n  while (i < 7) {\n    if (t !== v[i]) {\n      t = v[i];\n      c = 0;\n    } else {\n      c++;\n    }\n    i++;\n    /* istanbul ignore if  */\n    if (c === 4) break;\n  }\n  return t;\n};\n\nexport const checkStraight5on7 = (arr: number[]): boolean => {\n  let c: number = 0;\n  if (\n    arr[arr.length - 1] === 12 &&\n    arr[0] === 0 &&\n    arr.includes(1) &&\n    arr.includes(2) &&\n    arr.includes(3)\n  ) {\n    return true;\n  }\n  for (let i = 1; i < arr.length; ++i) {\n    if (arr[i - 1] + 1 === arr[i]) {\n      c++;\n    } else {\n      c = 0;\n    }\n    /* istanbul ignore if  */\n    if (c === 4) break;\n  }\n  return c >= 4;\n};\n\nexport const singlePairsList = (startSet: number[]): number[][] => {\n  let toAdd = kombinatoricsJs.multiCombinations(startSet, 3, 0);\n  let singlePairs = [];\n  for (let i = 0; i < startSet.length; ++i) {\n    for (let j = 0; j < toAdd.length; ++j) {\n      if (!toAdd[j].includes(startSet[i])) {\n        singlePairs.push([startSet[i], startSet[i], ...toAdd[j]]);\n      }\n    }\n  }\n  return singlePairs;\n};\n\nexport const internalDoublePairsSort = (a: number[], b: number[]): number => {\n  if (a[0] < b[0]) return -1;\n  if (a[0] > b[0]) return 1;\n  if (a[1] < b[1]) return -1;\n  if (a[1] > b[1]) return 1;\n  return 0;\n};\n\nexport const sortedPairsToAdd = (startSet: number[]): number[][] => {\n  let _toAdd = kombinatoricsJs.multiCombinations(startSet, 2, 0);\n\n  _toAdd.forEach(pair => {\n    /* istanbul ignore next */\n    if (pair[0] < pair[1]) {\n      [pair[0], pair[1]] = [pair[1], pair[0]];\n    }\n  });\n  _toAdd.sort(internalDoublePairsSort);\n\n  return _toAdd;\n};\n\nexport const doublePairsList = (startSet: number[]): number[][] => {\n  let toAdd = sortedPairsToAdd(startSet);\n  let doublePairs = [];\n\n  for (let j = 0; j < toAdd.length; ++j) {\n    for (let i = 0; i < startSet.length; ++i) {\n      if (!toAdd[j].includes(startSet[i])) {\n        doublePairs.push([toAdd[j][0], toAdd[j][0], toAdd[j][1], toAdd[j][1], startSet[i]]);\n      }\n    }\n  }\n  return doublePairs;\n};\n\nexport const trisList = (startSet: number[]): number[][] => {\n  let toAdd = sortedPairsToAdd(startSet);\n  let tris = [];\n  for (let i = 0; i < startSet.length; ++i) {\n    for (let j = 0; j < toAdd.length; ++j) {\n      if (!toAdd[j].includes(startSet[i])) {\n        tris.push([startSet[i], startSet[i], startSet[i], ...toAdd[j]]);\n      }\n    }\n  }\n  return tris;\n};\n\nexport const fullHouseList = (startSet: number[]): number[][] => {\n  let fullHouses = kombinatoricsJs.crossProduct(startSet, 2).filter(p => p[0] !== p[1]);\n  return fullHouses.map((hand, idx) => {\n    return [hand[0], hand[0], hand[0], hand[1], hand[1]];\n  });\n};\n\nexport const quadsList = (startSet: number[]): number[][] => {\n  let quads = kombinatoricsJs.crossProduct(startSet, 2).filter(p => p[0] !== p[1]);\n  return quads.map(hand => {\n    return [hand[0], hand[0], hand[0], hand[0], hand[1]];\n  });\n};\n\nexport const checkStraight = (arr: number[]): boolean => {\n  let cond = true;\n  if (arr[4] === 12 && arr[0] === 0) {\n    return arr[1] === 1 && arr[2] === 2 && arr[3] === 3;\n  }\n  for (let i = 1; i < arr.length; ++i) {\n    cond = cond && arr[i - 1] + 1 === arr[i];\n  }\n  return cond;\n};\n\nexport const checkDoublePair = (hand: number[]): boolean => {\n  /* istanbul ignore next */\n  return (\n    (hand[0] === hand[1] && hand[2] === hand[3] && hand[3] !== hand[4] && hand[1] !== hand[4]) ||\n    (hand[0] === hand[1] && hand[3] === hand[4] && hand[3] !== hand[2] && hand[1] !== hand[2]) ||\n    (hand[1] === hand[2] && hand[3] === hand[4] && hand[3] !== hand[0] && hand[2] !== hand[0])\n  );\n};\n\nexport const removeStraights = (list: number[][]): number[][] => {\n  return list.filter((hand, idx) => {\n    return !checkStraight(hand);\n  });\n};\n\nexport const _rankOfHand = (hand: number[], rankHash: NumberMap) => {\n  return rankHash[getVectorSum(hand)];\n};\nexport const _rankOf5onX = (hand: number[], rankHash: NumberMap) => {\n  return Math.max(...kombinatoricsJs.combinations(hand, 5).map(h => rankHash[getVectorSum(h)]));\n};\n\nexport const handToCardsSymbols = (hand: number[]): string => {\n  return hand.map(c => CONSTANTS.rankToFaceSymbol[c % 13]).join('');\n};\nexport const handRankToGroup = (rank: number): string => {\n  let groupsRanking = CONSTANTS.handsRankingDelimiter_5cards;\n  let i: number = 0;\n  let groupName: string = CONSTANTS.handRankingGroupNames[i];\n  while (rank > groupsRanking[i]) {\n    i++;\n    groupName = CONSTANTS.handRankingGroupNames[i];\n  }\n  return groupName;\n};\n\nexport const fillRank5 = (h: number[], idx: number, rankingObject: hashRanking): hashRanking => {\n  let hash = getVectorSum(h.map(card => rankingObject.baseRankValues[card]));\n  rankingObject.HASHES[hash] = idx;\n  rankingObject.rankingInfos[idx] = {\n    hand: h.slice(),\n    faces: handToCardsSymbols(h),\n    handGroup: handRankToGroup(idx)\n  };\n  return rankingObject;\n};\n\nexport const fillRank5PlusFlushes = (\n  h: number[],\n  idx: number,\n  rankingObject: hashRanking,\n  offset: number = CONSTANTS.FLUSHES_BASE_START + CONSTANTS.HIGH_CARDS_5_AMOUNT\n): hashRanking => {\n  let hash = getVectorSum(h.map(card => rankingObject.baseRankValues[card]));\n  let r = idx + offset;\n  rankingObject.HASHES[hash] = r;\n  rankingObject.rankingInfos[r] = {\n    hand: h.slice(),\n    faces: handToCardsSymbols(h),\n    handGroup: handRankToGroup(r)\n  };\n  return rankingObject;\n};\n\nexport const fillRankFlushes = (h: number[], rankingObject: hashRanking): hashRanking => {\n  let hash = getVectorSum(h.map(card => rankingObject.baseRankValues[card]));\n  let rank = rankingObject.HASHES[hash] + CONSTANTS.FLUSHES_BASE_START;\n  rankingObject.FLUSH_RANK_HASHES[hash] = rank;\n  rankingObject.rankingInfos[rank] = {\n    hand: h.slice(),\n    faces: handToCardsSymbols(h),\n    handGroup: handRankToGroup(rank)\n  };\n\n  return rankingObject;\n};\n","import * as CONSTANTS from './constants';\nimport {\n  getVectorSum,\n  _rankOf5onX,\n  fillRank5,\n  fillRank5PlusFlushes,\n  fillRankFlushes,\n  checkStraight5on7,\n  handToCardsSymbols,\n  handRankToGroup\n} from './routines';\nimport * as ROUTINES from './routines';\nimport * as kombinatoricsJs from 'kombinatoricsjs';\nimport { hashRanking, NumberMap } from './interfaces';\n\nexport const createRankOfFiveHashes = (): Readonly<hashRanking> => {\n  const hashRankingOfFive: hashRanking = {\n    HASHES: {},\n    FLUSH_CHECK_KEYS: CONSTANTS.flush5hHashCheck,\n    FLUSH_RANK_HASHES: {},\n    FLUSH_HASHES: {},\n    baseRankValues: CONSTANTS.ranksHashOn5,\n    baseSuitValues: CONSTANTS.suitsHash,\n    rankingInfos: new Array(7462)\n  };\n\n  //const handRankingInfos: (string | number)[] = hashRankingOfFive.rankingInfos;\n\n  const rankCards = CONSTANTS.rankCards;\n  const STRAIGHTS = CONSTANTS.STRAIGHTS;\n  const HIGH_CARDS_5_AMOUNT = CONSTANTS.HIGH_CARDS_5_AMOUNT;\n  let highCards = kombinatoricsJs.multiCombinations(rankCards, 5, 0);\n  const HIGH_CARDS = ROUTINES.removeStraights(highCards);\n  const SINGLE_PAIRS = ROUTINES.singlePairsList(rankCards);\n  const DOUBLE_PAIRS = ROUTINES.doublePairsList(rankCards);\n  const TRIPLES = ROUTINES.trisList(rankCards);\n  const FULLHOUSES = ROUTINES.fullHouseList(rankCards);\n  const QUADS = ROUTINES.quadsList(rankCards);\n\n  /*\n  let inc = 0;\n  console.log('high cards', (inc += HIGH_CARDS.length));\n  console.log('single pairs', (inc += SINGLE_PAIRS.length));\n  console.log('double pairs', (inc += DOUBLE_PAIRS.length));\n  console.log('triples', (inc += TRIPLES.length));\n  console.log('straights', (inc += STRAIGHTS.length));\n  \n  console.log('flushes', (inc += HIGH_CARDS_5_AMOUNT));\n  console.log('full houses', (inc += FULLHOUSES.length));\n  console.log('quads', (inc += QUADS.length));\n*/\n\n  let upToStraights = HIGH_CARDS.concat(SINGLE_PAIRS, DOUBLE_PAIRS, TRIPLES, STRAIGHTS);\n  upToStraights.forEach((h, idx) => {\n    fillRank5(h, idx, hashRankingOfFive);\n  });\n  let aboveStraights = FULLHOUSES.concat(QUADS);\n  aboveStraights.forEach((h, idx) => {\n    fillRank5PlusFlushes(h, idx, hashRankingOfFive);\n  });\n\n  /**FLUSHES and STRAIGHT FLUSHES */\n  HIGH_CARDS.forEach(h => {\n    fillRankFlushes(h, hashRankingOfFive);\n  });\n\n  STRAIGHTS.forEach((h, idx) => {\n    let hash = getVectorSum(h.map(card => hashRankingOfFive.baseRankValues[card]));\n    let rank = idx + CONSTANTS.STRAIGHT_FLUSH_BASE_START;\n    hashRankingOfFive.FLUSH_RANK_HASHES[hash] = rank;\n    hashRankingOfFive.rankingInfos[rank] = {\n      hand: h.slice(),\n      faces: handToCardsSymbols(h),\n      handGroup: handRankToGroup(rank)\n    };\n  });\n\n  return hashRankingOfFive;\n};\n\n//export const createRankOf5On6Hashes = () => { };\n\n/**@TODO add hand code to rankingInfo : [12,0,1,2,3,10,11] this is straight A2345KQ\n * or just retrieve category from rankValue the fine hightest card or components by statical exaustive hand analisys\n */\nexport const createRankOf5On7Hashes = (hashRankOfFive: hashRanking) => {\n  const hashRankingOfFiveOnSeven: hashRanking = {\n    HASHES: {},\n    FLUSH_CHECK_KEYS: {},\n    FLUSH_RANK_HASHES: {},\n    FLUSH_HASHES: {},\n    baseRankValues: CONSTANTS.ranksHashOn7,\n    baseSuitValues: CONSTANTS.suitsHash,\n    rankingInfos: hashRankOfFive.rankingInfos\n  };\n\n  let counter: number = 0;\n  const rankCards = CONSTANTS.rankCards;\n  const ranksHashOn7 = hashRankingOfFiveOnSeven.baseRankValues;\n  const suit7Hash = hashRankingOfFiveOnSeven.baseSuitValues;\n\n  kombinatoricsJs.multiCombinations(rankCards, 7, 3).forEach((hand: number[], i: number) => {\n    let h7 = hand.map(card => ranksHashOn7[card]);\n    let h5 = hand.map(card => hashRankOfFive.baseRankValues[card]);\n    let hash7: number = getVectorSum(h7);\n\n    hashRankingOfFiveOnSeven.HASHES[hash7] = _rankOf5onX(h5, hashRankOfFive.HASHES);\n  });\n\n  let fiveFlushes = kombinatoricsJs.combinations(rankCards, 5);\n  let sixFlushes = kombinatoricsJs.combinations(rankCards, 6);\n  let sevenFlushes = kombinatoricsJs.combinations(rankCards, 7);\n\n  fiveFlushes.concat(sixFlushes, sevenFlushes).forEach(h => {\n    let h5: number[] = h.map(c => hashRankOfFive.baseRankValues[c]);\n    let h7: number[] = h.map(c => hashRankingOfFiveOnSeven.baseRankValues[c]);\n    let hash7 = getVectorSum(h7);\n\n    /**@TODO simply draw rank from hashRankOfFive.FLUSH_RANK_HASHES*/\n    let rank = _rankOf5onX(h5, hashRankOfFive.HASHES);\n    if (checkStraight5on7(h)) {\n      rank += CONSTANTS.STRAIGHT_FLUSH_OFFSET;\n    } else {\n      rank += CONSTANTS.FLUSHES_BASE_START;\n    }\n    hashRankingOfFiveOnSeven.FLUSH_RANK_HASHES[hash7] = rank;\n  });\n\n  let fiveFlushHashes = [[0, 0, 0, 0, 0], [1, 1, 1, 1, 1], [8, 8, 8, 8, 8], [57, 57, 57, 57, 57]];\n  let sixFlushHashes: number[][] = [];\n  fiveFlushHashes.forEach((v, i) => {\n    sixFlushHashes.push(v.concat([0]), v.concat([1]), v.concat([8]), v.concat([57]));\n  });\n  let sevenFlushHashes: number[][] = [];\n\n  sixFlushHashes.forEach(v => {\n    sevenFlushHashes.push(v.concat([0]), v.concat([1]), v.concat([8]), v.concat([57]));\n  });\n\n  const FLUSH_CHECK_KEYS = hashRankingOfFiveOnSeven.FLUSH_CHECK_KEYS;\n\n  fiveFlushHashes.concat(sixFlushHashes, sevenFlushHashes).forEach(h => {\n    FLUSH_CHECK_KEYS[getVectorSum(h)] = h[0];\n  });\n\n  /*console.log(counter, sixFlushes, sevenFlushes, fiveFlushes);\n    console.log(cc, fiveFlushHashes, sixFlushHashes, sevenFlushHashes, hashRankingOfFiveOnSeven.FLUSH_CHECK_KEYS);\n    console.log(\"--------\", hashRankingOfFiveOnSeven);*/\n\n  return hashRankingOfFiveOnSeven;\n};\n","import * as kombinatoricsJs from 'kombinatoricsjs';\nimport { createRankOfFiveHashes, createRankOf5On7Hashes } from './hashesCreator';\nimport { fullCardsDeckHash_5, fullCardsDeckHash_7, FLUSH_MASK } from './constants';\nimport { handInfo, verboseHandInfo } from './interfaces';\n\nexport const HASHES_OF_FIVE = createRankOfFiveHashes();\nconst FLUSH_CHECK_FIVE = HASHES_OF_FIVE.FLUSH_CHECK_KEYS;\nconst HASH_RANK_FIVE = HASHES_OF_FIVE.HASHES;\nconst FLUSH_RANK_FIVE = HASHES_OF_FIVE.FLUSH_RANK_HASHES;\n\nexport const HASHES_OF_FIVE_ON_SEVEN = createRankOf5On7Hashes(HASHES_OF_FIVE);\nconst FLUSH_CHECK_SEVEN = HASHES_OF_FIVE_ON_SEVEN.FLUSH_CHECK_KEYS;\nconst HASH_RANK_SEVEN = HASHES_OF_FIVE_ON_SEVEN.HASHES;\nconst FLUSH_RANK_SEVEN = HASHES_OF_FIVE_ON_SEVEN.FLUSH_RANK_HASHES;\n\n/** @function handOfFiveEval\n *\n * @param {Number} c1...c5 cards hash from CONSTANTS.fullCardsDeckHash_5\n * @returns {Number} hand ranking\n */\nexport const handOfFiveEval = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number\n): number => {\n  let keySum: number = c1 + c2 + c3 + c4 + c5;\n  let rankKey: number = keySum >>> 9;\n  let flush_check_key: number = FLUSH_CHECK_FIVE[keySum & FLUSH_MASK];\n  if (flush_check_key >= 0) {\n    return FLUSH_RANK_FIVE[rankKey];\n  }\n\n  return HASH_RANK_FIVE[rankKey];\n};\n\n/** @function handOfFiveEvalIndexed\n *\n * @param {Number} c1...c5 cards index from [0...51]\n * @returns {Number} hand ranking\n */\nexport const handOfFiveEvalIndexed = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number\n): number => {\n  return handOfFiveEval(\n    fullCardsDeckHash_5[c1],\n    fullCardsDeckHash_5[c2],\n    fullCardsDeckHash_5[c3],\n    fullCardsDeckHash_5[c4],\n    fullCardsDeckHash_5[c5]\n  );\n};\n\n/** @function bfBestOfFiveOnX\n *\n * @param {Array:Number[]} array of 6 or more cards making up an hand\n * @returns {Number} hand ranking ( the best one on all combinations of input card in group of 5)\n */\nexport const bfBestOfFiveOnX = (hand: number[]) => {\n  //@ts-ignore\n  return Math.max(...kombinatoricsJs.combinations(hand, 5).map(h => handOfFiveEval(...h)));\n};\n\n/** @function handOfSevenEval\n *\n * @param {Number} c1...c7 cards hash from CONSTANTS.fullCardsDeckHash_7\n * @returns {Number} hand ranking\n */\nexport const handOfSevenEval = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number,\n  c6: number,\n  c7: number\n): number => {\n  let keySum: number = c1 + c2 + c3 + c4 + c5 + c6 + c7;\n  let handRank: number = 0;\n  let flush_check_key: number = FLUSH_CHECK_SEVEN[keySum & FLUSH_MASK];\n  if (flush_check_key >= 0) {\n    /**no full house or quads possible ---> can return flush_rank */\n\n    //@ts-ignore\n    let flushRankKey: number =\n      //@ts-ignore\n      ((c1 & FLUSH_MASK) == flush_check_key) * c1 +\n      //@ts-ignore\n      ((c2 & FLUSH_MASK) == flush_check_key) * c2 +\n      //@ts-ignore\n      ((c3 & FLUSH_MASK) == flush_check_key) * c3 +\n      //@ts-ignore\n      ((c4 & FLUSH_MASK) == flush_check_key) * c4 +\n      //@ts-ignore\n      ((c5 & FLUSH_MASK) == flush_check_key) * c5 +\n      //@ts-ignore\n      ((c6 & FLUSH_MASK) == flush_check_key) * c6 +\n      //@ts-ignore\n      ((c7 & FLUSH_MASK) == flush_check_key) * c7;\n\n    handRank = FLUSH_RANK_SEVEN[flushRankKey >>> 9];\n  } else {\n    handRank = HASH_RANK_SEVEN[keySum >>> 9];\n  }\n\n  return handRank;\n};\n\n/** @function handOfSevenEvalIndexed\n *\n * @param {Array:Number[]} array of 7 cards making up an hand\n * @returns {Number} hand ranking ( the best one on all combinations of input card in group of 5)\n */\nexport const handOfSevenEvalIndexed = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number,\n  c6: number,\n  c7: number\n): number => {\n  return handOfSevenEval(\n    fullCardsDeckHash_7[c1],\n    fullCardsDeckHash_7[c2],\n    fullCardsDeckHash_7[c3],\n    fullCardsDeckHash_7[c4],\n    fullCardsDeckHash_7[c5],\n    fullCardsDeckHash_7[c6],\n    fullCardsDeckHash_7[c7]\n  );\n};\n\n/** @function handOfSevenEval\n *\n * @param {Number} c1...c7 cards hash from CONSTANTS.fullCardsDeckHash_7\n * @returns {Number} hand ranking\n */\nexport const handOfSevenEval_Verbose = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number,\n  c6: number,\n  c7: number\n): verboseHandInfo => {\n  let keySum: number = c1 + c2 + c3 + c4 + c5 + c6 + c7;\n  let handRank: number = 0;\n  let flush_check_key: number = FLUSH_CHECK_SEVEN[keySum & FLUSH_MASK];\n  let flushRankKey = 0;\n  if (flush_check_key >= 0) {\n    /**no full house or quads possible ---> can return flush_rank */\n    let flushingCards = [c1, c2, c3, c4, c5, c6, c7].filter((c, i) => { return (c1 & FLUSH_MASK) == flush_check_key; });\n    //@ts-ignore\n\n    flushingCards.forEach(c => flushRankKey += c);\n\n    handRank = FLUSH_RANK_SEVEN[flushRankKey >>> 9];\n  } else {\n    handRank = HASH_RANK_SEVEN[keySum >>> 9];\n    flushRankKey = -1;\n  }\n\n  return {\n    handRank: handRank,\n    hand: HASHES_OF_FIVE.rankingInfos[handRank].hand,\n    faces: HASHES_OF_FIVE.rankingInfos[handRank].faces,\n    handGroup: HASHES_OF_FIVE.rankingInfos[handRank].handGroup,\n    winningCards: [],\n    flushSuit: flushRankKey\n  };\n};\n\n/** @function handOfSevenEvalIndexed_Verbose\n *\n * @param {Array:Number[]} array of 7 cards making up an hand\n * @returns {Number} hand ranking ( the best one on all combinations of input card in group of 5) + ranking info including flush suit and winning cards\n */\nexport const handOfSevenEvalIndexed_Verbose = (\n  c1: number,\n  c2: number,\n  c3: number,\n  c4: number,\n  c5: number,\n  c6: number,\n  c7: number\n): verboseHandInfo => {\n  return handOfSevenEval_Verbose(\n    fullCardsDeckHash_7[c1],\n    fullCardsDeckHash_7[c2],\n    fullCardsDeckHash_7[c3],\n    fullCardsDeckHash_7[c4],\n    fullCardsDeckHash_7[c5],\n    fullCardsDeckHash_7[c6],\n    fullCardsDeckHash_7[c7]\n  );\n};\n\n/** @function getHandInfo\n *\n * @param {Number} hand rank\n * @returns {Number} object containing hand info\n */\nexport const getHandInfo = (rank: number): handInfo => {\n  return HASHES_OF_FIVE.rankingInfos[rank];\n}\n","import * as kombinatoricsJs from 'kombinatoricsjs';\n\nimport { handOfSevenEvalIndexed, handOfFiveEvalIndexed, getHandInfo } from './pokerEvaluators';\nimport * as PKEval from './pokerEvaluators';\n\nexport default PKEval;\nexport { handOfSevenEvalIndexed, handOfFiveEvalIndexed, getHandInfo };\n\n//const HASHES_OF_FIVE = createRankOfFiveHashes();\n\n//const HASHES_OF_FIVE_ON_SEVEN = createRankOf5On7Hashes(HASHES_OF_FIVE);\n\n//console.log(\"MAIN:\", HASHES_OF_FIVE, HASHES_OF_FIVE_ON_SEVEN, handOfSevenEvalIndexed(12, 0, 1, 2, 3, 34, 23));\n\n/**@TODO yahtzee ,poker dice,yacht,generala ,cheerio*/\n"],"names":["kombinatoricsJs.multiCombinations","kombinatoricsJs.crossProduct","kombinatoricsJs.combinations","CONSTANTS.rankToFaceSymbol","CONSTANTS.handsRankingDelimiter_5cards","CONSTANTS.handRankingGroupNames","CONSTANTS.FLUSHES_BASE_START","CONSTANTS.HIGH_CARDS_5_AMOUNT","CONSTANTS.flush5hHashCheck","CONSTANTS.ranksHashOn5","CONSTANTS.suitsHash","rankCards","CONSTANTS.rankCards","STRAIGHTS","CONSTANTS.STRAIGHTS","ROUTINES.removeStraights","ROUTINES.singlePairsList","ROUTINES.doublePairsList","ROUTINES.trisList","ROUTINES.fullHouseList","ROUTINES.quadsList","CONSTANTS.STRAIGHT_FLUSH_BASE_START","CONSTANTS.ranksHashOn7","ranksHashOn7","CONSTANTS.STRAIGHT_FLUSH_OFFSET"],"mappings":"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"}